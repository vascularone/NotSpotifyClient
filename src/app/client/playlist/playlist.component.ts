import { Component, OnInit } from '@angular/core';
import { Router } from '@angular/router';
import { Playlist } from 'src/app/core/models/playlist.dto';
import { SongDTO } from 'src/app/core/models/song.dto';
import { ApiRequestService } from 'src/app/core/services/api-requests/ApiRequest.service';

@Component({
  selector: 'app-playlist',
  templateUrl: './playlist.component.html',
  styleUrls: ['./playlist.component.css']
})
export class PlaylistComponent implements OnInit {

  userId: number = 1;
  constructor(private apiRequest: ApiRequestService, private router: Router) { }
  playlists: Playlist[] = [];
  songs: SongDTO[] = [];
  playlistSongs: SongDTO[] = [];
  playlist : Playlist = {
    id: 9,
    name: 'anotherPLAYLISTOOO',
    description: 'IT HAS A DESCRIPTOO',
    linkRef: 'data:image/jpeg;base64,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'
  }

  ngOnInit() {
    this.getPlaylistByUserId();
  }

  getPlaylistByUserId()
  {
    this.apiRequest.getPlaylistByUserId(this.userId).subscribe(res => {
      this.playlists = res.data;
    })
  }
  getSongsByPlaylistId(id: number)
  {
    this.apiRequest.getSongsByPlaylistId(id).subscribe(res => {
      this.playlistSongs = res.data;
      console.log(res.data);
    })
  }

  showSongs(index: number)
  {
    console.log(this.songs[index]);
  }

  createPlaylist()
  {
    this.apiRequest.createPlaylist(this.playlist).subscribe(() => {
      console.log("playlist created");
    })
  }

}
